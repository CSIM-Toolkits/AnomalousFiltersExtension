<?xml version="1.0" encoding="utf-8"?>
<executable>
<category>Examples</category>
<title>MSLesionDetection</title>
<description><![CDATA[This is a CLI module that can be bundled in an extension]]></description>
<version>1.0.0</version>
<documentation-url>http://www.example.com/Slicer/Modules/MSLesionDetection</documentation-url>
<license>Slicer</license>
<contributor>Antonio Carlos Senra Filho (University of Sao Paulo), Luiz Otavio Murta Junior (University of Sao Paulo)</contributor>
<acknowledgements>This work was partially funded by CAPES and CNPq</acknowledgements>
   <parameters>
	<directory>
	   <name>outputFolder</name>
	   <longflag>--outputFolder</longflag>
	   <label>Output folder</label>
	   <default>./</default>
	   <description><![CDATA[Output all images used for MS segmentation process.]]></description>
	</directory>
	<label>IO</label>
	   <description><![CDATA[Input/output parameters]]></description>
	<image>
	   <name>t1Volume</name>
	   <label>T1w Volume</label>
	   <channel>input</channel>
	   <index>0</index>
	   <description><![CDATA[T1 Input volume]]></description>
	</image>
        <image>
	   <name>t1GdVolume</name>
	   <label>T1-Gdw Volume</label>
	   <channel>input</channel>
	   <index>1</index>
	   <description><![CDATA[T1-Gd Input volume]]></description>
	</image>
	<image>
	   <name>FLAIRVolume</name>
	   <label>T2 FLAIR Volume</label>
	   <channel>input</channel>
	   <index>2</index>
	   <description><![CDATA[T2 FLAIR Input volume]]></description>
	</image>
	<image>
	   <name>FAVolume</name>
	   <label>DTI-FA Volume</label>
	   <channel>input</channel>
	   <index>3</index>
	   <description><![CDATA[DTI-FA Input Volume]]></description>
	</image>
	<image>
	   <name>outputVolume</name>
	   <label>Output Volume</label>
	   <channel>output</channel>
	   <index>4</index>
	   <description><![CDATA[Output Volume]]></description>
	</image>
   </parameters>

<parameters advanced="true">
      <label>Brain Extraction Parameter Set</label>
      <description><![CDATA[Brain extraction pipeline parameters. OBS: This method uses both FSL 5.0 (BET) toolkit and Freesurfer watershed algorithm. Choose which one is the most appropriated method for your data.]]></description>
 	<string-enumeration>
	      <name>skullStripMethodT1</name>
	      <longflag>--skullStripT1</longflag>
	      <description><![CDATA[Choose the method that performs the better skull stripping in your data]]></description>
	      <label>Brain extraction for T1w</label>
	      <default>Fs-watershed</default>
	      <element>Fs-watershed</element>
	      <element>FSL-BET</element>
	</string-enumeration>
<string-enumeration>
	      <name>skullStripMethodT1Gd</name>
	      <longflag>--skullStripT1GD</longflag>
	      <description><![CDATA[Choose the method that performs the better skull stripping in your data]]></description>
	      <label>Brain extraction for T1-Gdw</label>
	      <default>FSL-BET</default>
	      <element>Fs-watershed</element>
	      <element>FSL-BET</element>
	</string-enumeration>
<string-enumeration>
	      <name>skullStripMethodFLAIR</name>
	      <longflag>--skullStripFLAIR</longflag>
	      <description><![CDATA[Choose the method that performs the better skull stripping in your data]]></description>
	      <label>Brain extraction for FLAIR</label>
	      <default>Fs-watershed</default>
	      <element>Fs-watershed</element>
	      <element>FSL-BET</element>
	</string-enumeration>	
<string-enumeration>
	      <name>skullStripMethodFA</name>
	      <longflag>--skullStripFA</longflag>
	      <description><![CDATA[Choose the method that performs the better skull stripping in your data]]></description>
	      <label>Brain extraction for DTI-FA map</label>
	      <default>Fs-watershed</default>
	      <element>Fs-watershed</element>
	      <element>FSL-BET</element>
	</string-enumeration>	
	<integer>
	   <name>preFlooding</name>
	   <longflag>--preFlooding</longflag>
	   <label>Pre Flooding (h)</label>
	   <description><![CDATA[Freesurfer Parameter: Regulates the watershed intensity over the skull estimation. Higher percentage values give a more agressive algorithm, i.e. the skull is over estimated.]]></description>
	   <default>25</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>100</maximum>
	   <step>1</step>
	   </constraints>
	</integer> 	
        <double>
	   <name>valueF</name>
	   <longflag>--BETf</longflag>
	   <flag>f</flag>
	   <label>Fractional Level</label>
	   <description><![CDATA[A double value for brain volume estimative (0->1)]]></description>
	   <default>0.1</default>
	   <constraints>
	   <minimum>0.0</minimum>
	   <maximum>1.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
        <double>
	   <name>valueG</name>
	   <longflag>--BETg</longflag>
	   <flag>g</flag>
	   <label>Gradient in fractional intensity</label>
	   <description><![CDATA[Vertical gradient in fractional intensity threshold (-1->1)]]></description>
	   <default>0.0</default>
	   <constraints>
	   <minimum>-1.0</minimum>
	   <maximum>1.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
        <boolean>
	      <name>optionB</name>
	      <longflag>--optionB</longflag>
	      <description><![CDATA[This attempts to reduce image bias, and residual neck voxels]]></description>
	      <label>Bias and Neck removal</label>
	      <default>true</default>
	</boolean>
   </parameters>

 <parameters>
<label>Registration Set</label>
	<description><![CDATA[Image registering parameters]]></description>
	<image>
	   <name>fixedVolume</name>
	   <label>Fixed Volume</label>
	   <channel>input</channel>
	   <index>5</index>
	   <description><![CDATA[Fixed volume used to align the others selected images (usually an brain image atlas)]]></description>
	</image>
<double>
	   <name>nSamples</name>
	   <longflag>--samples</longflag>
	   <label>Percentage of Samples</label>
	   <description><![CDATA[A value (0.0 - 1.0) that defines how much points are needed to sample in the fixed image to obtain registration landmarks. Usually 1% to low detail images and 20% for high detail images.]]></description>
	   <default>0.02</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>1</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
	<double>
	   <name>learnRate</name>
	   <longflag>--lrate</longflag>
	   <label>Learning Rate</label>
	   <description><![CDATA[A value (0.0 - 1.0) that defines how fast is the evolution parameters into each register iteration.]]></description>
	   <default>0.1</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>1</maximum>
	   <step>0.1</step>
	   </constraints>
	</double>
	<double>
	   <name>metricFixedStd</name>
	   <longflag>--mfStd</longflag>
	   <label>Metric Standard Deviation (Fixed Image)</label>
	   <description><![CDATA[A value that defines the range similarity search of the metric method]]></description>
	   <default>0.4</default>
	   <constraints>
	   <minimum>0.1</minimum>
	   <maximum>2.0</maximum>
	   <step>0.1</step>
	   </constraints>
	</double>
	<double>
	   <name>metricMovingStd</name>
	   <longflag>--mmfStd</longflag>
	   <label>Metric Standard Deviation (Moving Image)</label>
	   <description><![CDATA[A value that defines the range similarity search of the metric method]]></description>
	   <default>0.4</default>
	   <constraints>
	   <minimum>0.1</minimum>
	   <maximum>2.0</maximum>
	   <step>0.1</step>
	   </constraints>
	</double>
	<integer>
	   <name>nInteration</name>
	   <longflag>--nInter</longflag>
	   <label>Number of Iterations</label>
	   <description><![CDATA[The number of interation needed to complete the registration process]]></description>
	   <default>1500</default>
	   <constraints>
	   <minimum>100</minimum>
	   <maximum>3000</maximum>
	   <step>50</step>
	   </constraints>
	</integer>	
   </parameters>

<parameters advanced="true">
	<label>Non Uniformity Correction</label>
	<description><![CDATA[Algorithm to correct the non uniformity effect resulting from the rf pulse]]></description>
	<boolean>
	      <name>useNUT1</name>
	      <longflag>--useNUT1</longflag>
	      <description><![CDATA[Use the non uniformity step on all brain segmented images. This step is useful for the tissue segmentation procedure. Choose if you want apply it on T1w volume.]]></description>
	      <label>Apply on T1w</label>
	      <default>true</default>
	</boolean>
	<boolean>
	      <name>useNUT1Gd</name>
	      <longflag>--useNUT1Gd</longflag>
	      <description><![CDATA[Use the non uniformity step on all brain segmented images. This step is useful for the tissue segmentation procedure. Choose if you want apply it on T1-Gdw volume.]]></description>
	      <label>Apply on T1-Gdw</label>
	      <default>true</default>
	</boolean>
	<boolean>
	      <name>useNUFLAIR</name>
	      <longflag>--useNUFLAIR</longflag>
	      <description><![CDATA[Use the non uniformity step on all brain segmented images. This step is useful for the tissue segmentation procedure. Choose if you want apply it on FLAIR volume.]]></description>
	      <label>Apply on FLAIR</label>
	      <default>true</default>
	</boolean>
	<boolean>
	      <name>useNUFA</name>
	      <longflag>--useNUFA</longflag>
	      <description><![CDATA[Use the non uniformity step on all brain segmented images. This step is useful for the tissue segmentation procedure. Choose if you want apply it on DTI-FA volume.]]></description>
	      <label>Apply on FA</label>
	      <default>true</default>
	</boolean>
</parameters>


<parameters advanced="true">	
	<label>T1w Volume Filtering Parameters Set</label>
	<description><![CDATA[Image filtering parameters specific for T1w image modality]]></description>
	<double>
	   <name>condutanceT1</name>
	   <longflag>--condutanceT1</longflag>
	   <label>Condutance</label>
	   <description><![CDATA[A integer value for edge preservation adjustment.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>10</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
	<integer>
	   <name>iterationsT1</name>
	   <longflag>--iterationsT1</longflag>
	   <label>Number of Iterations</label>
	   <description><![CDATA[A integer value that defines the number of iterations.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>1</minimum>
	   <maximum>50</maximum>
	   <step>1</step>
	   </constraints>
	   </integer>
	<double>
	   <name>timeStepT1</name>
	   <longflag>--timestepT1</longflag>
	   <label>Time Step</label>
	   <description><![CDATA[A double value that regulates the numerical stability of the algorithm. It is safe to maintain the upper limit with the formulation given by Anisotropic Diffusion algorithm (See 			GradientAnisotropiDiffusionImageFilter in ITK documentation).]]></description>
	   <default>0.0625</default>
	   <constraints>
	   <minimum>0.0015</minimum>
	   <maximum>0.0625</maximum>
	   <step>0.001</step>
	   </constraints>
	</double>
	<double>
	   <name>qT1</name>
	   <longflag>--qT1</longflag>
	   <label>Anomalous Parameter</label>
	   <description><![CDATA[A double value that defines the q-Gaussian probability distribution function which is convoluated in each neighborhood in the image.]]></description>
	   <default>1.20</default>
	   <constraints>
	   <minimum>0.0</minimum>
	   <maximum>2.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
   </parameters>  
   
   <parameters advanced="true">	
	<label>T1-Gdw Volume Filtering Parameters Set</label>
	<description><![CDATA[Image filtering parameters specific for T1-Gdw image modality]]></description>
	<double>
	   <name>condutanceT1Gd</name>
	   <longflag>--condutanceT1Gd</longflag>
	   <label>Condutance</label>
	   <description><![CDATA[A integer value for edge preservation adjustment.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>10</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
	<integer>
	   <name>iterationsT1Gd</name>
	   <longflag>--iterationsT1Gd</longflag>
	   <label>Number of Iterations</label>
	   <description><![CDATA[A integer value that defines the number of iterations.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>1</minimum>
	   <maximum>50</maximum>
	   <step>1</step>
	   </constraints>
	   </integer>
	<double>
	   <name>timeStepT1Gd</name>
	   <longflag>--timestepT1Gd</longflag>
	   <label>Time Step</label>
	   <description><![CDATA[A double value that regulates the numerical stability of the algorithm. It is safe to maintain the upper limit with the formulation given by Anisotropic Diffusion algorithm (See GradientAnisotropiDiffusionImageFilter in ITK documentation).]]></description>
	   <default>0.0625</default>
	   <constraints>
	   <minimum>0.0015</minimum>
	   <maximum>0.0625</maximum>
	   <step>0.001</step>
	   </constraints>
	</double>
	<double>
	   <name>qT1Gd</name>
	   <longflag>--qT1Gd</longflag>
	   <label>Anomalous Parameter</label>
	   <description><![CDATA[A double value that defines the q-Gaussian probability distribution function which is convoluated in each neighborhood in the image.]]></description>
	   <default>1.25</default>
	   <constraints>
	   <minimum>0.0</minimum>
	   <maximum>2.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
   </parameters> 

  <parameters advanced="true">	
	<label>FLAIR Volume Filtering Parameters Set</label>
	<description><![CDATA[Image filtering parameters specific for FLAIR image modality]]></description>
	<double>
	   <name>condutanceFLAIR</name>
	   <longflag>--condutanceFLAIR</longflag>
	   <label>Condutance</label>
	   <description><![CDATA[A integer value for edge preservation adjustment.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>10</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
	<integer>
	   <name>iterationsFLAIR</name>
	   <longflag>--iterationsFLAIR</longflag>
	   <label>Number of Iterations</label>
	   <description><![CDATA[A integer value that defines the number of iterations.]]></description>
	   <default>6</default>
	   <constraints>
	   <minimum>1</minimum>
	   <maximum>50</maximum>
	   <step>1</step>
	   </constraints>
	   </integer>
	<double>
	   <name>timeStepFLAIR</name>
	   <longflag>--timestepFLAIR</longflag>
	   <label>Time Step</label>
	   <description><![CDATA[A double value that regulates the numerical stability of the algorithm. It is safe to maintain the upper limit with the formulation given by Anisotropic Diffusion algorithm (See 			GradientAnisotropiDiffusionImageFilter in ITK documentation).]]></description>
	   <default>0.0625</default>
	   <constraints>
	   <minimum>0.0015</minimum>
	   <maximum>0.0625</maximum>
	   <step>0.001</step>
	   </constraints>
	</double>
	<double>
	   <name>qFLAIR</name>
	   <longflag>--qFLAIR</longflag>
	   <label>Anomalous Parameter</label>
	   <description><![CDATA[A double value that defines the q-Gaussian probability distribution function which is convoluated in each neighborhood in the image.]]></description>
	   <default>1.20</default>
	   <constraints>
	   <minimum>0.0</minimum>
	   <maximum>2.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
   </parameters> 

<parameters advanced="true">	
	<label>DTI-FA Map Volume Filtering Parameters Set</label>
	<description><![CDATA[Image filtering parameters specific for DTI-FA image modality]]></description>
	<double>
	   <name>condutanceFA</name>
	   <longflag>--condutanceFA</longflag>
	   <label>Condutance</label>
	   <description><![CDATA[A integer value for edge preservation adjustment.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>0</minimum>
	   <maximum>10</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
	<integer>
	   <name>iterationsFA</name>
	   <longflag>--iterationsFA</longflag>
	   <label>Number of Iterations</label>
	   <description><![CDATA[A integer value that defines the number of iterations.]]></description>
	   <default>5</default>
	   <constraints>
	   <minimum>1</minimum>
	   <maximum>50</maximum>
	   <step>1</step>
	   </constraints>
	   </integer>
	<double>
	   <name>timeStepFA</name>
	   <longflag>--timestepFA</longflag>
	   <label>Time Step</label>
	   <description><![CDATA[A double value that regulates the numerical stability of the algorithm. It is safe to maintain the upper limit with the formulation given by Anisotropic Diffusion algorithm (See 			GradientAnisotropiDiffusionImageFilter in ITK documentation).]]></description>
	   <default>0.0625</default>
	   <constraints>
	   <minimum>0.0015</minimum>
	   <maximum>0.0625</maximum>
	   <step>0.001</step>
	   </constraints>
	</double>
	<double>
	   <name>qFA</name>
	   <longflag>--qFA</longflag>
	   <label>Anomalous Parameter</label>
	   <description><![CDATA[A double value that defines the q-Gaussian probability distribution function which is convoluated in each neighborhood in the image.]]></description>
	   <default>0.5</default>
	   <constraints>
	   <minimum>0.0</minimum>
	   <maximum>2.0</maximum>
	   <step>0.01</step>
	   </constraints>
	</double>
   </parameters> 

   
</executable>
